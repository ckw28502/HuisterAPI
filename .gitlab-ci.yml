#variables:
# GRADLE_OPTS: "-Dorg.gradle.daemon=false"
#
#stages:
# - build
# - test
# - sonarqube-check
#build:
# stage: build
# script:
#  - ./gradlew assemble
#test:
# stage: test
# script:
#  - ./gradlew test
#
#
#sonarqube-check:
# stage: sonarqube-check
# script: ./gradlew test sonar
# allow_failure: true
# only:
#  - master

before_script:
 - chmod +x gradlew
 - export JAVA_HOME=$JDK_PATH
 - export PATH=$JAVA_HOME/bin:$PATH
 - java -version

stages:
 - build
 - test
 - sonarqube-check

build:
 stage: build
 script:
  - ./gradlew assemble

test:
 stage: test
 script:
  - ./gradlew test

sonarqube-check:
 stage: sonarqube-check
 script:
  - ./gradlew test sonarqube
 allow_failure: true
 only:
  - master

